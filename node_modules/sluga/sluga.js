var chars = require('./chars/lowerCase');

function replaceLoop(str) {
  if (!str || typeof str !== 'string') return str;
  str = str.split('');
  for (var i = 0, c = str.length, returnChar; i < c; i++) {
    returnChar = sluga.chars[str[i]];
    if (returnChar) {
      str[i] = returnChar;
    } else if (!/^[a-z0-9\-]+$/g.test(str[i])) {
      str[i] = ' ';
    }
  }
  return str.join('');
}

function sluga(str) {
  return replaceLoop(String(str).toLowerCase())
    .replace(/[^\w\s]+/g, '')
    .replace(/\s+/g, '-')
    .replace(/(^\-|\-$)/g, '');
}

sluga.chars = chars;

module.exports = sluga;
